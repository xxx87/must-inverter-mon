# Must PV18 Solar Monitor & Control System ‚òÄÔ∏èüîã

–¶–µ Open Source —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Å–æ–Ω—è—á–Ω–∏–º–∏ —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞–º–∏ —Å–µ—Ä—ñ—ó **Must PV18** (–∑–æ–∫—Ä–µ–º–∞ PV18-3024 VPM —Ç–∞ –∞–Ω–∞–ª–æ–≥—ñ–≤) –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **Node.js** —Ç–∞ **Raspberry Pi**.

–ü—Ä–æ–µ–∫—Ç –¥–æ–∑–≤–æ–ª—è—î –≤—ñ–¥–º–æ–≤–∏—Ç–∏—Å—è –≤—ñ–¥ –ø–æ–≤—ñ–ª—å–Ω–∏—Ö —Ç–∞ –∑–∞–ª–µ–∂–Ω–∏—Ö –≤—ñ–¥ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∫–∏—Ç–∞–π—Å—å–∫–∏—Ö Wi-Fi –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—ñ–≤ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å –ø–æ–≤–Ω—ñ—Å—Ç—é –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ, —à–≤–∏–¥–∫–æ–≥–æ —Ç–∞ –±–µ–∑–ø–µ—á–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è.

## üöÄ –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- **‚ö° Real-time –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:** –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–æ –Ω–∞–ø—Ä—É–≥—É, —Å—Ç—Ä—É–º, –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ —Å—Ç–∞–Ω –º–µ—Ä–µ–∂—ñ –∫–æ–∂–Ω—ñ –∫—ñ–ª—å–∫–∞ —Å–µ–∫—É–Ω–¥.
- **üìä –õ–æ–∫–∞–ª—å–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è:** –í–±—É–¥–æ–≤–∞–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö **SQLite** –∑–±–µ—Ä—ñ–≥–∞—î —ñ—Å—Ç–æ—Ä—ñ—é –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤. –Ø–∫—â–æ –∑–Ω–∏–∫–Ω–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Äî –¥–∞–Ω—ñ –Ω–µ –≤—Ç—Ä–∞—Ç—è—Ç—å—Å—è.
- **üè† Home Assistant:** –ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ **MQTT** (Auto Discovery –∞–±–æ —Ä—É—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è).
- **üìà Grafana / InfluxDB:** –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ —É InfluxDB –¥–ª—è –ø–æ–±—É–¥–æ–≤–∏ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö –≥—Ä–∞—Ñ—ñ–∫—ñ–≤.
- **üñ•Ô∏è Web UI:** –í–ª–∞—Å–Ω–∏–π –ª–µ–≥–∫–∏–π –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Dark Mode), –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è —Ä–æ–±–æ—Ç–∏ –≤ —Ä–µ–∂–∏–º—ñ Kiosk –Ω–∞ Raspberry Pi –∑ –º–∞–ª–µ–Ω—å–∫–∏–º –µ–∫—Ä–∞–Ω–æ–º.
- **üõ†Ô∏è –ö–µ—Ä—É–≤–∞–Ω–Ω—è:** –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞ (–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –¥–∂–µ—Ä–µ–ª–∞, —Å—Ç—Ä—É–º–∏ –∑–∞—Ä—è–¥–∫–∏ —Ç–æ—â–æ) —á–µ—Ä–µ–∑ API.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É —Ç–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ –Ω–µ —Ç—ñ–ª—å–∫–∏ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫, –∞–ª–µ –π —É—Ç–∏–ª—ñ—Ç–∏, —è–∫—ñ –¥–æ–ø–æ–º–æ–≥–ª–∏ —Ä–µ–≤–µ—Ä—Å-—ñ–Ω–∂–∏–Ω—ñ—Ä–∏—Ç–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞.

### üîπ –û—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏:

- **`server.js`** ‚Äî **–ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –¥–æ–¥–∞—Ç–∫–∞.** –¶–µ "–º–æ–∑–æ–∫" —Å–∏—Å—Ç–µ–º–∏. –í—ñ–Ω:
  - –ü—ñ–¥–Ω—ñ–º–∞—î Express –≤–µ–±-—Å–µ—Ä–≤–µ—Ä.
  - –û–ø–∏—Ç—É—î —ñ–Ω–≤–µ—Ä—Ç–æ—Ä –ø–æ Modbus RTU —É –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ–º—É —Ü–∏–∫–ª—ñ.
  - –ö–µ—Ä—É—î —á–µ—Ä–≥–æ—é –∫–æ–º–∞–Ω–¥ –Ω–∞ –∑–∞–ø–∏—Å (–∑–º—ñ–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å).
  - –ü–∏—à–µ –¥–∞–Ω—ñ –≤ SQLite, MQTT —Ç–∞ InfluxDB.
- **`public/`** ‚Äî –ü–∞–ø–∫–∞ –∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º (HTML/CSS/JS) –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —É –±—Ä–∞—É–∑–µ—Ä—ñ.

### üîπ –£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ —Ç–∞ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è (Dev Tools):

- **`sniffer.js`** ‚Äî **"–°–Ω–∞–π–ø–µ—Ä".** –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–æ—á–∫–æ–≤–æ–≥–æ –ø–æ—à—É–∫—É –¥–∞–Ω–∏—Ö. –í—ñ–Ω —á–∏—Ç–∞—î —Ä–µ–≥—ñ—Å—Ç—Ä–∏ –ø–æ –æ–¥–Ω–æ–º—É –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ–º–∏–ª–æ–∫. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –∑–Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –∞–¥—Ä–µ—Å–∏ (—Å–ø—ñ–≤—Å—Ç–∞–≤–∏—Ç–∏ CSV –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –∑ —Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—é) —Ç–∞ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –∑–º—ñ—â–µ–Ω–Ω—è (offset) –∞–¥—Ä–µ—Å.
- **`scan.js`** ‚Äî **"–°–∫–∞–Ω–µ—Ä".** –ù–∞–º–∞–≥–∞—î—Ç—å—Å—è —á–∏—Ç–∞—Ç–∏ —Ä–µ–≥—ñ—Å—Ç—Ä–∏ –±–ª–æ–∫–∞–º–∏ (–ø–æ 10-30 —à—Ç—É–∫). –î–æ–ø–æ–º–∞–≥–∞—î —à–≤–∏–¥–∫–æ –ø–æ–±–∞—á–∏—Ç–∏ –º–∞—Å–∏–≤ –¥–∞–Ω–∏—Ö, –∞–ª–µ –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏ CRC –Ω–∞ –¥–µ—è–∫–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞—Ö, —è–∫—ñ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å –ø–∞–∫–µ—Ç–Ω–µ —á–∏—Ç–∞–Ω–Ω—è.
- **`monitor.js`** ‚Äî **CLI-–º–æ–Ω—ñ—Ç–æ—Ä.** –ü—Ä–æ—Å—Ç–∞ –≤–µ—Ä—Å—ñ—è –ø—Ä–æ–≥—Ä–∞–º–∏ –±–µ–∑ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ —Ç–∞ –±–∞–∑ –¥–∞–Ω–∏—Ö. –ü—Ä–æ—Å—Ç–æ –≤–∏–≤–æ–¥–∏—Ç—å –ø–æ—Ç–æ—á–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ —É –∫–æ–Ω—Å–æ–ª—å Linux. –Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —à–≤–∏–¥–∫–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–≤'—è–∑–∫—É.

---

## üõ†Ô∏è –í–∏–º–æ–≥–∏

1.  **–ó–∞–ª—ñ–∑–æ:**
    - Raspberry Pi (–±—É–¥—å-—è–∫–∞ –≤–µ—Ä—Å—ñ—è, –Ω–∞–≤—ñ—Ç—å 2B/3B) –∞–±–æ –±—É–¥—å-—è–∫–∏–π Linux/Windows –ü–ö.
    - –ö–∞–±–µ–ª—å USB Type-A -\> USB Type-B (–∑–≤–∏—á–∞–π–Ω–∏–π "–ø—Ä–∏–Ω—Ç–µ—Ä–Ω–∏–π" –∫–∞–±–µ–ª—å) –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ USB –ø–æ—Ä—Ç—É —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞ (—Ç–∞–º –≤–±—É–¥–æ–≤–∞–Ω–∏–π —á—ñ–ø USB-Serial).
2.  **–ü–ó:**
    - Node.js (v14 –∞–±–æ –≤–∏—â–µ).
    - –ì—Ä—É–ø–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ `dialout` (–¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ USB –ø–æ—Ä—Ç—ñ–≤ —É Linux).

## ‚öôÔ∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1.  **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:**

    ```bash
    git clone https://github.com/xxx87/must-inverter-mon.git
    cd must-inverter-mon
    ```

2.  **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**

    ```bash
    yarn install
    ```

3.  **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
    –°—Ç–≤–æ—Ä—ñ—Ç—å .env —Ñ–∞–π–ª –∑–∞ –≤—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ –π–æ–≥–æ –ø—ñ–¥ –≤–∞—à—ñ –ø–æ—Ç—Ä–µ–±–∏:

    ```javascript
    cp env.example .env;
    ```

4.  **–ó–∞–ø—É—Å–∫:**

    ```bash
    node server.js
    ```

    –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://IP-–í–∞—à–æ—ó-Raspberry:3000`

## üè† –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Home Assistant

–î–∞–Ω—ñ –ø—É–±–ª—ñ–∫—É—é—Ç—å—Å—è –≤ —Ç–æ–ø—ñ–∫ `home/solar/json` (–ø–æ–≤–Ω–∏–π –æ–±'—î–∫—Ç) —Ç–∞ –æ–∫—Ä–µ–º—ñ —Ç–æ–ø—ñ–∫–∏. –ü—Ä–∏–∫–ª–∞–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ–Ω—Å–æ—Ä–∞ –≤ `configuration.yaml`:

```yaml
mqtt:
  sensor:
    - name: "Solar Battery Voltage"
      state_topic: "home/solar/battery_v"
      unit_of_measurement: "V"
      device_class: voltage
    - name: "Solar Load Power"
      state_topic: "home/solar/load_power"
      unit_of_measurement: "W"
      device_class: power
```

## ‚ö†Ô∏è –í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ

–¶–µ –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –Ω–∞–¥–∞—î—Ç—å—Å—è "—è–∫ —î". –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ –±—É–¥—å-—è–∫—ñ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è. –ó–º—ñ–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç–∏ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –Ω–∞ –≤–∞—à –≤–ª–∞—Å–Ω–∏–π —Å—Ç—Ä–∞—Ö —ñ —Ä–∏–∑–∏–∫. –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –¥–æ –≤–∞—à–æ—ó –º–æ–¥–µ–ª—ñ —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞.

---

Created with ‚ù§Ô∏è and Node.js
